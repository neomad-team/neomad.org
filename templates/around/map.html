{% extends 'layout.html' %}

{% block title %}Around you{% endblock %}

{% block extra_css %}
  <link rel=stylesheet href=https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.css >
  <link rel=stylesheet href={{ url_for('static', filename='css/around-map.css') }}>
  <script src=https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.js></script>
 {% endblock %}

{% block main %}
  {% for user in users %}
    <h1>Find someone or something close to <em>{{ user }}</em></h1>

    <div id=map></div>

    <script>
      var current_location = {{ user.current_location or [] }}
      var locations = [
      {% for location in locations %}
        {
          date: '{{ location.date|datetime }}',
          position: {{ location.position }}
        },
      {% endfor %}
      ]
    </script>
  {% endfor %}
  <script src={{ url_for('static', filename='js/around-map.js') }}></script>
{% endblock %}
